<!DOCTYPE html>
<html lang="et-EE"
      data-color-scheme-mode="system"
      data-active-color-scheme="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,interactive-widget=resizes-content">

    <meta name="theme-color" media="(prefers-color-scheme: light)" content="cyan"/>
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="yellow"/>
    <title>Demo</title>
    <link rel="stylesheet" href="css/web.css">
</head>
<body>

<header id="site-header">
    <nav class="top-navigation">
        <select class="menu-opener nowrap">
            <option disabled hidden selected>☰ TTDB</option>
            <option>Lavastused</option>
        </select>
    </nav>
    <search class="search-container">
        <form role="search">
            <input type="text"
                   id="show"
                   class="top-search"
                   name="q"
                   size="1"
                   aria-label="Search TTDB"
                   autocorrect="off"
                   autocapitalize="off"
                   autocomplete="off">
            <button aria-label="Clear search" type="button">×</button>
            <button aria-label="Submit search" type="submit">✓</button>
        </form>

        <input type="checkbox" checked>
    </search>
</header>

<main>
    <article class="review-top">
        <div class="left">
            <header class="play-title">
                <h1>Hea põhjatuule vastu</h1>
                <p class="subtitle">armastus ridade vahel</p>
            </header>

            <section class="info-tags">
                <span>2025</span>
                <span title="Etendus on ühe vaheajaga ja kestab 2 tundi ja 20 minutit">2 tundi 20 minutit</span>
                <span>1 vaheaeg</span>
                <!--<span>ilma vaheajata</span>-->
            </section>

            <aside class="actions">
                <button>Rate</button>
                <button>Save</button>
            </aside>
        </div>

        <div>
            <img class="poster-image" alt="Hea põhjatuule vastu poster"
                 src="images/hea-pohjatuule-vastu-karlova-teater.jpg"
                 width="100" height="150">
        </div>

    </article>

    <div>
        <div>Kriitikud 96%</div>
        <div>Publik 70%</div>
    </div>

    <div>
        Critic Reviews

    </div>

    <p class="synopsis">
        Mehe ja naise juhuslik kohtumine netiavarustes paisub anonüümsuse kiuste elu armastuseks.
    </p>

    <p>
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
    </p>

    <p>
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
    </p>

    <p>
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
    </p>

    <p>
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
    </p>

    <p>
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
    </p>

    <p>
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
    </p>

    <p>
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
    </p>

    <p>
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
        And some very long text.
    </p>

    <aside>Aside</aside>
</main>

<footer>
    Footer
</footer>


<script>
    function enableColorSchemeMode(mode) {
        const activeColorScheme = resolveToColorScheme(mode);

        setColorSchemeMode(mode);
        setActiveColorScheme(activeColorScheme);
        saveColorSchemeMode(mode);
    }

    function resolveToColorScheme(mode) {
        if (mode === "system") {
            return querySystemColorScheme()
        } else {
            return mode;
        }
    }

    function querySystemColorScheme() {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            return "dark"
        }
        return "light"
    }

    function listenForSystemColorSchemeChange() {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            let mode = fetchColorSchemeMode();
            if (mode === "system") {
                enableColorSchemeMode("system")
            }
        });
    }

    function setColorSchemeMode(mode) {
        document.documentElement.dataset.colorSchemeMode = mode;
    }

    function setActiveColorScheme(colorScheme) {
        document.documentElement.dataset.activeColorScheme = colorScheme;
    }

    function saveColorSchemeMode(mode) {
        sessionStorage.setItem("color-scheme-mode", mode);
    }

    function fetchColorSchemeMode() {
        return sessionStorage.getItem("color-scheme-mode");
    }

    function setColorSchemeRadioInputChecked(colorSchemeMode) {
        if (colorSchemeMode) {
            let selectedInput;
            switch (colorSchemeMode) {
                case "light":
                    selectedInput = document.getElementById("color-scheme-selected-light");
                    break;
                case "dark":
                    selectedInput = document.getElementById("color-scheme-selected-dark");
                    break;
                case "system":
                    selectedInput = document.getElementById("color-scheme-selected-system");
                    break;
                default:
                    selectedInput = document.getElementById("color-scheme-selected-system");
            }
            selectedInput.checked = true;
        }
    }
</script>

<div class="bottom-modal">
    <section aria-label="Color scheme switcher">
        <div id="color-scheme-switcher" style="user-select: none">
            Theme:
            <input type="radio" id="color-scheme-selected-system" name="selected-color-scheme" value="system"
                   onchange="enableColorSchemeMode(this.value)" checked/><label
                for="color-scheme-selected-system">Automatic</label>

            <input type="radio" id="color-scheme-selected-light" name="selected-color-scheme" value="light"
                   onchange="enableColorSchemeMode(this.value)"/><label
                for="color-scheme-selected-light">Light</label>

            <input type="radio" id="color-scheme-selected-dark" name="selected-color-scheme" value="dark"
                   onchange="enableColorSchemeMode(this.value)"/><label
                for="color-scheme-selected-dark">Dark</label>
        </div>
    </section>
</div>

<script>
    const colorSchemeMode = fetchColorSchemeMode()
    if (colorSchemeMode) {
        enableColorSchemeMode(colorSchemeMode);
        setColorSchemeRadioInputChecked(colorSchemeMode);
    } else {
        enableColorSchemeMode("system");
        setColorSchemeRadioInputChecked("system");
    }
    listenForSystemColorSchemeChange();
</script>

</body>
</html>